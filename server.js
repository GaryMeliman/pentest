process.env.NODE_ENV = process.env.NODE_ENV || 'development'; // development / OR / production // [mode]

var config = require('./config/config'), //global-config
	mongoose = require('./config/mongoose'), //mongoose needs to be first 
	express = require('./config/express'),
	passport = require('./config/passport'); // facebook and local auth

var db = mongoose(), 
	app = express(),
	passport = passport();

app.listen(config.port);

module.exports = app; //export app
console.log('['+ process.env.NODE_ENV + '] mode in http://localhost:' + config.port);